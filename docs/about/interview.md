# 模拟面试

### 自我介绍

面试官，你好，我叫铉嘉伟，2015 年毕业于中北大学，信息与通信工程专业，15 年毕业开始工作到现在一直从事大前端相关工作。

目前就职于涂鸦智能，在涂鸦工作 4 年半的时间里，主要在公司跨端架构部门担任资深前端开发工程师，主要负责涂鸦小程序生态的开发，还有平台相关的前端开发和小程序低代码搭建的相关工作。

下面我会以小程序引擎的开发经历作为切入点，如果过程中您有问题，可以随时打断问我。

小程序引擎，这个项目我经历了 0-1 的开发，项目开始的原因是涂鸦起初的 RN 生态的版本问题，急需一个类似的容器能力去承载涂鸦 App 端设备控制场景，超级 App➕ 可以热更新的小应用。最开始我们选择的是 kraken，现在开源叫做 webf，这个项目是 react2flutter，flutter 实现了完整的 web 标准，可以把 web 端的产物直接在 flutter skia 上渲染。这个方案做了两个月坑太多了，后面换成了小程序引擎。小程序引擎也经历了两个大的迭代，1.0 阶段的架构模型是参考了滴滴小程序的架构，双线程引擎，逻辑层负责执行业务 js 逻辑和与容器交互管理生命周期，视图层的负责整个组件系统和渲染 vdom render。

这个模型的构建器我们会把 XML 解析成一整个 ast，XML Ast 也是一棵树，不过会包含一些模板函数比如 vif vfor 和模版变量这种，挂载在视图层，在逻辑层 js 执行的时候，把页面关联的数据传递到视图层，视图层拿到页面的 ast，就可以转换成一棵完整的 vnode，从而去创建元素渲染到浏览器。

这是 1.0 阶段整体框架，根据我刚才讲的，

这个当时也很赶工，跑了大半年做了验证就换成了 2.0 的架构模型。

### 讲一下小程序引擎的架构

OK，首先我们知道 2 点，第一点是小程序是双线程
