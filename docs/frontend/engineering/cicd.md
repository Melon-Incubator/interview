# æŒç»­é›†æˆï¼ˆCIï¼‰ã€æŒç»­äº¤ä»˜ï¼ˆCDï¼‰

## **åŸºç¡€æ¦‚å¿µ**

### **1. æŒç»­é›†æˆï¼ˆCIï¼‰ã€æŒç»­äº¤ä»˜ï¼ˆCDï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šCI/CD åŸºç¡€æ¦‚å¿µï¼ŒåŒºåˆ«å’Œè”ç³»ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

- **æŒç»­é›†æˆï¼ˆCIï¼‰**ï¼šå¼€å‘äººå‘˜é¢‘ç¹åˆå¹¶ä»£ç åˆ°ä¸»åˆ†æ”¯ï¼Œå¹¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå…¼å®¹æ€§ã€‚
- **æŒç»­äº¤ä»˜ï¼ˆCDï¼‰**ï¼šCI ä¹‹åçš„æ­¥éª¤ï¼Œä»£ç éƒ¨ç½²åˆ°**ç±»ç”Ÿäº§ç¯å¢ƒ**ï¼ˆstagingï¼‰ï¼Œä½†**éœ€è¦äººå·¥æ‰¹å‡†**æ‰èƒ½ä¸Šçº¿ã€‚

ğŸ“Œ **ç®€åŒ–ç†è§£**ï¼š
CIï¼ˆåˆå¹¶ä»£ç  + è‡ªåŠ¨æµ‹è¯•ï¼‰ â†’ CDï¼ˆè‡ªåŠ¨æ‰“åŒ… + é¢„å‘å¸ƒï¼‰

---

### **2. CI/CD ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šCI/CD çš„å®é™…ä½œç”¨ï¼Œæ˜¯å¦ç†è§£ DevOps æ€ç»´ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š
CI/CD è§£å†³äº†ï¼š

1. **ä»£ç è´¨é‡é—®é¢˜**ï¼šæ¯æ¬¡åˆå¹¶ä»£ç éƒ½ä¼šè§¦å‘è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œé˜²æ­¢ Bug è¿›å…¥ä¸»åˆ†æ”¯ã€‚
2. **ç¯å¢ƒä¸ä¸€è‡´é—®é¢˜**ï¼šCI/CD ç¡®ä¿æµ‹è¯•ã€é¢„å‘å¸ƒã€ç”Ÿäº§ç¯å¢ƒä¸€è‡´ï¼Œå‡å°‘â€œè¿™ä»£ç åœ¨æˆ‘ç”µè„‘ä¸Šæ²¡é—®é¢˜â€æƒ…å†µã€‚
3. **éƒ¨ç½²ç¹çé—®é¢˜**ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²å‡å°‘äººä¸ºé”™è¯¯ï¼Œæé«˜æ•ˆç‡ã€‚
4. **äº¤ä»˜ç¼“æ…¢é—®é¢˜**ï¼šæé«˜è¿­ä»£é€Ÿåº¦ï¼Œå¿«é€Ÿå‘å¸ƒæ–°åŠŸèƒ½ã€‚

---

## **CI/CD å·¥å…·**

### **3. CI/CD å¸¸ç”¨çš„å·¥å…·æœ‰å“ªäº›ï¼Ÿä½ ç”¨è¿‡å“ªäº›ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šå¯¹ä¸»æµ CI/CD å·¥å…·çš„ç†Ÿæ‚‰åº¦ï¼Œæ˜¯å¦æœ‰å®é™…ç»éªŒã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š
**å¸¸è§ CI/CD å·¥å…·**ï¼š

- **Jenkins**ï¼ˆæœ€æµè¡Œï¼Œæ”¯æŒæ’ä»¶ä¸°å¯Œï¼‰
- **GitHub Actions**ï¼ˆGitHub åŸç”Ÿæ”¯æŒï¼Œé€‚åˆå¼€æºé¡¹ç›®ï¼‰
- **GitLab CI/CD**ï¼ˆGitLab å†…ç½®ï¼Œå’Œ GitLab ä»“åº“é«˜åº¦é›†æˆï¼‰
- **CircleCI**ï¼ˆäº‘ç«¯ CI/CDï¼Œæ˜“äºé›†æˆï¼‰
- **Travis CI**ï¼ˆé€‚ç”¨äº GitHubï¼Œæ˜“ä¸Šæ‰‹ï¼‰
- **ArgoCD**ï¼ˆGitOps æŒç»­éƒ¨ç½²ï¼‰

ğŸ“Œ **å®é™…ç»éªŒ**ï¼š

> â€œæˆ‘ä¸»è¦ç”¨ GitLab CI/CD é…åˆ Kubernetesï¼ˆK8sï¼‰åšè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¹Ÿç”¨è¿‡ GitHub Actions è¿›è¡Œå‰ç«¯é¡¹ç›®çš„ CI/CDã€‚â€

---

### **4. ä½ å¦‚ä½•åœ¨ GitLab CI/CD é‡Œæ§åˆ¶åˆå¹¶è¯·æ±‚çš„æƒé™ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šCI/CD ç»“åˆ Git æƒé™ç®¡ç†ï¼Œæ˜¯å¦å…·å¤‡å®é™…æ“ä½œç»éªŒã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š
åœ¨ GitLab CI/CD é‡Œï¼Œå¯ä»¥ç”¨ **è§„åˆ™** æ§åˆ¶åˆå¹¶æƒé™ï¼š

1. **é™åˆ¶å¼€å‘è€…åˆå¹¶æƒé™**ï¼š

   ```yaml
   rules:
     - if: '$CI_COMMIT_BRANCH == "main"'
       allow_failure: false
       when: manual
   ```

   ğŸ“Œ **è§£é‡Š**ï¼šå¦‚æœæ˜¯ `main` åˆ†æ”¯ï¼Œå¿…é¡»æ‰‹åŠ¨æ‰¹å‡†ï¼ˆé˜²æ­¢ç›´æ¥åˆå¹¶ï¼‰ã€‚

2. **æ ¹æ®æ–‡ä»¶å˜æ›´æ§åˆ¶åˆå¹¶æƒé™**ï¼š
   ```yaml
   rules:
     - changes:
         paths:
           - "config/**"
       when: never
   ```
   ğŸ“Œ **è§£é‡Š**ï¼šå¦‚æœ `config` ç›®å½•å˜æ›´ï¼Œåˆ™é˜»æ­¢åˆå¹¶ï¼ˆä¾‹å¦‚é…ç½®æ–‡ä»¶éœ€è¦ç»´æŠ¤è€…å®¡æ ¸ï¼‰ã€‚

---

## **CI/CD æµç¨‹**

### **5. CI/CD çš„å…¸å‹æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šæ˜¯å¦äº†è§£ CI/CD çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š
CI/CD å…¸å‹æµç¨‹ï¼š

1. **å¼€å‘ï¼ˆDevï¼‰**ï¼šå¼€å‘äººå‘˜æäº¤ä»£ç åˆ° Gitã€‚
2. **æŒç»­é›†æˆï¼ˆCIï¼‰**ï¼š
   - è§¦å‘æ„å»ºï¼ˆnpm build / Docker æ„å»ºï¼‰
   - è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ã€E2E æµ‹è¯•ï¼‰
   - ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆESLintã€Prettierã€SonarQubeï¼‰
3. **æŒç»­äº¤ä»˜ï¼ˆCDï¼‰**ï¼š
   - ç”Ÿæˆåˆ¶å“ï¼ˆArtifact/Docker é•œåƒï¼‰
   - éƒ¨ç½²åˆ° Stagingï¼ˆé¢„å‘å¸ƒç¯å¢ƒï¼‰
   - äººå·¥å®¡æ‰¹
4. **æŒç»­éƒ¨ç½²ï¼ˆCDï¼‰**ï¼š
   - è‡ªåŠ¨å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ
   - ç›‘æ§æ—¥å¿—ã€å¥åº·æ£€æŸ¥

ğŸ“Œ **ç¤ºä¾‹ CI/CD æµç¨‹**

```yaml
stages:
  - build
  - test
  - deploy

build:
  script:
    - npm install
    - npm run build

test:
  script:
    - npm test

deploy:
  script:
    - npm run deploy
```

---

### **6. å¦‚ä½•åœ¨ CI/CD è¿‡ç¨‹ä¸­è¿›è¡Œå›æ»šï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šåº”å¯¹çº¿ä¸Šæ•…éšœçš„èƒ½åŠ›ï¼Œç†Ÿæ‚‰ GitOps æˆ– Kubernetesã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š
æœ‰å‡ ç§æ–¹å¼è¿›è¡Œå›æ»šï¼š

1. **Git å›æ»š**ï¼š

   ```sh
   git revert HEAD
   git push origin main
   ```

   ğŸ“Œ **é€‚ç”¨åœºæ™¯**ï¼šä»£ç é—®é¢˜ï¼Œå¿«é€Ÿæ¢å¤åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚

2. **Docker/K8s å›æ»š**ï¼š

   ```sh
   kubectl rollout undo deployment my-app
   ```

   ğŸ“Œ **é€‚ç”¨åœºæ™¯**ï¼šå®¹å™¨åŒ–åº”ç”¨ï¼Œå¯ä»¥ä¸€é”®å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚

3. **è“ç»¿éƒ¨ç½²**ï¼š
   - ç”Ÿäº§ç¯å¢ƒåŒæ—¶è¿è¡Œ `v1` å’Œ `v2`
   - å‘ç° `v2` æœ‰é—®é¢˜ï¼Œåˆ‡å› `v1`  
     ğŸ“Œ **é€‚ç”¨åœºæ™¯**ï¼šæ— ç¼åˆ‡æ¢ç‰ˆæœ¬ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ã€‚

---

## **CI/CD è¿›é˜¶**

### **7. å¦‚ä½•ä¼˜åŒ– CI/CD æ‰§è¡Œé€Ÿåº¦ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šæ€§èƒ½ä¼˜åŒ–ï¼Œé¿å… CI/CD å˜æ…¢å½±å“å¼€å‘æ•ˆç‡ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **ç¼“å­˜ä¾èµ–**ï¼ˆé¿å…é‡å¤å®‰è£… npm/yarn ä¾èµ–ï¼‰
   ```yaml
   cache:
     paths:
       - node_modules/
   ```
2. **å¹¶è¡Œæ‰§è¡Œä»»åŠ¡**
   ```yaml
   test:
     script:
       - npm run lint &
       - npm run test &
   ```
3. **ä½¿ç”¨è½»é‡çº§ Docker é•œåƒ**
   ```dockerfile
   FROM node:18-alpine
   ```
4. **è·³è¿‡ä¸å¿…è¦çš„ Job**
   ```yaml
   rules:
     - if: '$CI_COMMIT_BRANCH != "main"'
       when: never
   ```

---

### **8. å¦‚ä½•åœ¨ CI/CD é‡Œç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API Keyï¼‰ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šå®‰å…¨æ€§ï¼Œå¦‚ä½•ç®¡ç†ç¯å¢ƒå˜é‡ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

- **GitLab/GitHub Secrets**ï¼ˆå­˜å‚¨ç¯å¢ƒå˜é‡ï¼‰
- **Kubernetes Secrets**ï¼ˆå­˜å‚¨ API Keyï¼Œé¿å…æ˜æ–‡å­˜å‚¨ï¼‰
- **Vaultï¼ˆHashiCorpï¼‰**ï¼ˆç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼‰

ç¤ºä¾‹ï¼š

```yaml
script:
  - echo "API_KEY=$API_KEY" >> .env
```

---

### **9. å¦‚ä½•åœ¨ CI/CD é‡Œè¿›è¡Œç°åº¦å‘å¸ƒï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šéƒ¨ç½²ç­–ç•¥ï¼Œæ˜¯å¦ç†è§£ Canary å‘å¸ƒã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

- **Canary å‘å¸ƒ**ï¼šå…ˆéƒ¨ç½²ç»™ 10% ç”¨æˆ·ï¼Œå¦‚æœæ²¡é—®é¢˜å†å…¨é‡å‘å¸ƒã€‚
- **Kubernetes æ–¹å¼**ï¼š
  ```yaml
  strategy:
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 10%
  ```

---

### **10. ä½ å¦‚ä½•åœ¨ CI/CD ä¸­ç›‘æ§å’Œè¯Šæ–­éƒ¨ç½²é—®é¢˜ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šæ—¥å¿—ã€ç›‘æ§ã€å‘Šè­¦ç³»ç»Ÿã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

- **ELKï¼ˆElasticsearch + Kibana + Logstashï¼‰**
- **Prometheus + Grafana**ï¼ˆå®æ—¶ç›‘æ§ï¼‰
- **Sentry**ï¼ˆé”™è¯¯ç›‘æ§ï¼‰
- **Slack/Webhook**ï¼ˆéƒ¨ç½²å¤±è´¥é€šçŸ¥ï¼‰

ä»¥ä¸‹æ˜¯ **CI/CDï¼ˆæŒç»­é›†æˆ/æŒç»­äº¤ä»˜ï¼‰å‘å¸ƒå®‰å…¨** ç›¸å…³çš„ **10 é“ç»å…¸é¢è¯•é¢˜**ï¼Œæ¶µç›– **ä»£ç å®¡è®¡ã€å‡­è¯ç®¡ç†ã€ä¾›åº”é“¾å®‰å…¨ã€éƒ¨ç½²ç­–ç•¥ã€å›æ»šæœºåˆ¶** ç­‰æ ¸å¿ƒè€ƒç‚¹ã€‚

## å®‰å…¨ç›¸å…³

### **1. CI/CD ä¸­å¦‚ä½•é˜²æ­¢æ¶æ„ä»£ç æ³¨å…¥ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šä»£ç å®¡è®¡ã€é™æ€åˆ†æã€ä»£ç è¯„å®¡æœºåˆ¶ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š
**é˜²å¾¡æªæ–½**ï¼š

1. **ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰**ï¼šæ‰€æœ‰åˆå¹¶è¯·æ±‚å¿…é¡»ç»è¿‡ **è‡³å°‘ 2 äººå®¡æ ¸**ã€‚
2. **é™æ€ä»£ç æ‰«æï¼ˆSASTï¼‰**ï¼š
   ```yaml
   jobs:
     security-scan:
       script:
         - sonar-scanner
   ```
3. **ç­¾ç½²æäº¤ï¼ˆCommit Signingï¼‰**ï¼šè¦æ±‚å¼€å‘è€…ä½¿ç”¨ GPG ç­¾åæäº¤ä»£ç ï¼Œç¡®ä¿èº«ä»½å¯ä¿¡ã€‚
   ```sh
   git commit -S -m "secure commit"
   ```

---

### **2. å¦‚ä½•é˜²æ­¢ CI/CD è¿‡ç¨‹ä¸­æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šç¯å¢ƒå˜é‡ç®¡ç†ã€å‡­è¯å­˜å‚¨å®‰å…¨ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **é¿å…ç¡¬ç¼–ç **ï¼šä¸è¦åœ¨ä»£ç ä¸­å­˜å‚¨ API Keyã€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ã€‚
2. **ä½¿ç”¨ GitLab / GitHub Secret å­˜å‚¨å‡­æ®**ï¼š
   ```yaml
   env:
     DATABASE_URL: ${{ secrets.DATABASE_URL }}
   ```
3. **åŠ å¯† CI/CD å˜é‡**ï¼Œé˜²æ­¢æ³„éœ²ï¼š
   ```sh
   echo "API_KEY=xxx" | gpg --encrypt --recipient "ci-server"
   ```

---

### **3. å¦‚ä½•é˜²æ­¢ CI/CD è¿‡ç¨‹ä¸­ä¾›åº”é“¾æ”»å‡»ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šç¬¬ä¸‰æ–¹ä¾èµ–ç®¡ç†ã€å®‰å…¨æ€§å®¡æŸ¥ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **ä½¿ç”¨ `package-lock.json` / `yarn.lock` å›ºå®šä¾èµ–ç‰ˆæœ¬**ï¼Œé˜²æ­¢è¢«ç¯¡æ”¹ï¼š
   ```sh
   npm ci
   ```
2. **å®šæœŸæ‰«æä¾èµ–æ¼æ´**ï¼š
   ```sh
   npm audit fix
   ```
3. **ä½¿ç”¨ç§æœ‰ npm / é•œåƒä»“åº“**ï¼š
   ```sh
   npm set registry https://private-registry.com
   ```

---

### **4. CI/CD è¿‡ç¨‹ä¸­å¦‚ä½•ç¡®ä¿æ„å»ºç¯å¢ƒå®‰å…¨ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šå®¹å™¨å®‰å…¨ã€CI/CD è¿è¡Œç¯å¢ƒéš”ç¦»ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **ä½¿ç”¨æœ€å°æƒé™åŸåˆ™**ï¼ŒCI/CD è¿è¡Œæ—¶ä¸ä½¿ç”¨ `root` ç”¨æˆ·ï¼š
   ```dockerfile
   USER node
   ```
2. **æ„å»ºç¯å¢ƒéš”ç¦»**ï¼Œä½¿ç”¨ Docker Sandbox è¿è¡Œ CI/CD ä»»åŠ¡ï¼š
   ```yaml
   jobs:
     build:
       image: node:18
   ```
3. **å®šæœŸæ‰«æ CI/CD æœåŠ¡å™¨ä¸Šçš„æ¶æ„è½¯ä»¶**ï¼š
   ```sh
   clamscan -r /var/lib/jenkins
   ```

---

### **5. å¦‚ä½•é˜²æ­¢ CI/CD è¿‡ç¨‹ä¸­çš„äººä¸ºé”™è¯¯ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šå‘å¸ƒå®¡æ‰¹æœºåˆ¶ã€å›æ»šç­–ç•¥ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **å¤šçº§å®¡æ‰¹æµç¨‹**ï¼š
   - ä»… **ç®¡ç†å‘˜** æ‰èƒ½è§¦å‘ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼š
     ```yaml
     jobs:
       deploy:
         rules:
           - if: $CI_COMMIT_BRANCH == "main" && $USER_ROLE == "admin"
     ```
   - ä»£ç å˜æ›´åï¼Œå¿…é¡»ç» **Code Review + QA æµ‹è¯• + æ‰¹å‡†**ã€‚
2. **å‘å¸ƒè‡ªåŠ¨å›æ»š**ï¼š
   - é‡‡ç”¨ **è“ç»¿éƒ¨ç½²**ï¼Œå¦‚æœæ–°ç‰ˆæœ¬å¼‚å¸¸ï¼Œè‡ªåŠ¨å›æ»šåˆ°æ—§ç‰ˆæœ¬ï¼š
     ```sh
     kubectl rollout undo deployment web-app
     ```

---

### **6. å¦‚ä½•é˜²æ­¢ CI/CD è¿‡ç¨‹ä¸­ä»£ç è¢«ç¯¡æ”¹ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šä»£ç å®Œæ•´æ€§æ ¡éªŒã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **å¯ç”¨ Git ä¿æŠ¤åˆ†æ”¯**ï¼Œé˜²æ­¢ç›´æ¥ä¿®æ”¹ï¼š
   ```sh
   git branch --set-upstream-to=origin/main --force
   ```
2. **ä»£ç æäº¤ç­¾å**ï¼š
   ```sh
   git commit -S -m "Signed commit"
   ```
3. **æ„å»ºå Hash æ ¡éªŒ**ï¼Œç¡®ä¿äº§ç‰©æœªè¢«ç¯¡æ”¹ï¼š
   ```sh
   sha256sum build/output.js
   ```

---

### **7. å¦‚ä½•é˜²æ­¢æ¶æ„ PR è¿›å…¥ CI/CDï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šPR ä¿æŠ¤ç­–ç•¥ã€è‡ªåŠ¨æ£€æŸ¥ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **é™åˆ¶å¤–éƒ¨è´¡çŒ®è€…æƒé™**ï¼Œé˜²æ­¢æœªæˆæƒç”¨æˆ·ç›´æ¥è§¦å‘ CI/CDã€‚
2. **æ‰€æœ‰ PR å¿…é¡»é€šè¿‡é™æ€ä»£ç æ‰«æï¼ˆSASTï¼‰**ï¼š
   ```yaml
   jobs:
     code-scan:
       script:
         - sonar-scanner
   ```
3. **PR ä¿æŠ¤ç­–ç•¥**ï¼š
   - å¿…é¡»é€šè¿‡æ‰€æœ‰ CI æ£€æŸ¥
   - éœ€è¦ **è‡³å°‘ 2 äººå®¡æ‰¹**
   - é™åˆ¶ **åˆå¹¶åˆ°ä¸»åˆ†æ”¯çš„æƒé™**

---

### **8. å¦‚ä½•é˜²æ­¢ CI/CD è¿‡ç¨‹ä¸­ç§é’¥æ³„éœ²ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šå¯†é’¥ç®¡ç†ã€æœ€å°æƒé™åŸåˆ™ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **ä½¿ç”¨ä¸“é—¨çš„ Secret Managerï¼ˆå¦‚ AWS Secrets Managerï¼‰å­˜å‚¨ç§é’¥**ã€‚
2. **é¿å…åœ¨ CI/CD æ—¥å¿—ä¸­æ‰“å°å¯†é’¥**ï¼š
   ```yaml
   env:
     SSH_KEY: ${{ secrets.SSH_KEY }}
   ```
3. **CI/CD æœåŠ¡å™¨ä¸Šç¦ç”¨ç§é’¥å¯¼å‡º**ï¼š
   ```sh
   chmod 400 ~/.ssh/id_rsa
   ```

---

### **9. å¦‚ä½•é˜²æ­¢ CI/CD æœåŠ¡å™¨æœ¬èº«è¢«æ”»å‡»ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šCI/CD æœåŠ¡å™¨å®‰å…¨åŠ å›ºã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **é™åˆ¶ CI/CD æœåŠ¡å™¨è®¿é—®æƒé™**ï¼š
   ```sh
   iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 22 -j ACCEPT
   ```
2. **å®šæœŸæ›´æ–° CI/CD å·¥å…·ï¼ˆå¦‚ GitLab Runnerã€Jenkinsï¼‰**ï¼Œé˜²æ­¢æ¼æ´æ”»å‡»ã€‚
3. **ç›‘æ§ CI/CD æœåŠ¡å™¨çš„å¼‚å¸¸è¡Œä¸º**ï¼ˆå¦‚ `fail2ban` é˜²æ­¢æš´åŠ›ç ´è§£ï¼‰ã€‚

---

### **10. å¦‚ä½•åœ¨ CI/CD ä¸­ç¡®ä¿éƒ¨ç½²åŒ…æœªè¢«ç¯¡æ”¹ï¼Ÿ**

âœ… **è€ƒå¯Ÿç‚¹**ï¼šæ„å»ºäº§ç‰©æ ¡éªŒã€Hash éªŒè¯ã€‚

âœ… **ç¤ºä¾‹å›ç­”**ï¼š

1. **æ„å»ºå‰å Hash æ ¡éªŒ**ï¼š
   ```sh
   sha256sum build.tar.gz > checksum.txt
   ```
2. **ç­¾ç½²æ„å»ºäº§ç‰©**ï¼š
   ```sh
   gpg --sign --armor -o build.sig build.tar.gz
   ```
3. **å‘å¸ƒæ—¶æ ¡éªŒç­¾å**ï¼š
   ```sh
   gpg --verify build.sig build.tar.gz
   ```

---
